<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.statea.dao.ext.BoardDao">
	<select id="selectBoardView" resultType="BoardViewDTO">
		SELECT
		bd_code, bd_title,
		bd_user, bd_content, like_count as bd_like, bd_vcount,
		bd_time, img_src
		as bd_img
		FROM
		tbl_board
		LEFT JOIN tbl_like
		ON board_code = like_concode
		LEFT JOIN tbl_image
		ON
		bd_code = img_concode
	</select>

	<select id="selectBoardList" resultType="BoardListDTO">
		SELECT
		bd_code, bd_title,
		bd_user, like_count as bd_like, bd_view, bd_date, bd_time
		FROM
		tbl_board
		LEFT JOIN tbl_like
		ON board_code = like_bdcode
		order by
		board_code DESC
	</select>

	<select id="findSearch" resultType="BoardListDTO">
		SELECT
		bd_code, bd_title,
		bd_user, like_count as bd_like, bd_vcount, bd_time
		FROM
		tbl_board
		LEFT
		JOIN tbl_like
		ON board_code = like_bdcode
		where bd_title
		like = '%?%'
		order by board_code DESC
	</select>
	<insert id="insertorUpdate" parameterType="BoardVO">
		insert into
		tbl_board(bd_code, bd_title,
		bd_content, bd_writer, bd_vcount, bd_time)
		values(#{board_code}, #{board_title},
		#{board_content},
		#{board_writer}, #{board_vcount},
		#{board_date},#{board_time})
	</insert>

	<delete id="delete">
		delete from tbl_board
		where bd_code = ?
	</delete>

	<update id="update" parameterType="BoardVO">
		update tbl_board set
		bd_content =#{bd_content},
		bd_title = #{bd_title}
		where
		bd_code =
		#{bd_code}
	</update>

</mapper>